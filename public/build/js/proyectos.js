!function(){!async function(){try{const t=location.origin+"/api/proyectos",n=await fetch(t),c=await n.json();e=c.proyectos,o()}catch(e){console.log(e)}}();let e=[];function o(){if(function(){const e=document.querySelector(".listado-proyectos");for(;e.firstChild;)e.removeChild(e.firstChild)}(),0===e.length){const e=document.createElement("P");e.innerHTML="No hay Proyectos Aún <a href='/crear-proyecto'>Comienza creando uno</a>",e.classList.add("no-proyectos");return void document.querySelector(".contenido").appendChild(e)}const t=document.querySelector(".listado-proyectos");e.forEach(n=>{const{proyecto:c,url:i}=n,r=document.createElement("LI");r.classList.add("proyecto");const a=document.createElement("A");a.href="/proyecto?id="+i,a.textContent=c;const s=document.createElement("BUTTON");s.innerHTML="<img src='build/img/cross.svg' alt='imagen cerrar'>",s.onclick=function(){!function(t){Swal.fire({title:"¿Eliminar Proyecto?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",customClass:{popup:"sweet-container"}}).then(n=>{n.isConfirmed&&async function(t){const{id:n,proyecto:c,url:i,propietarioId:r}=t,a=new FormData;a.append("id",n),a.append("proyecto",c),a.append("url",i),a.append("propietarioId",r);const s=location.origin+"/api/proyecto/eliminar",l=await fetch(s,{method:"POST",body:a}),d=await l.json();d.resultado?(Swal.fire({title:"Eliminado!",text:d.mensaje,icon:"success",customClass:{popup:"sweet-container-success"}}),e=e.filter(e=>e.id!==n),o()):Swal.fire({title:"Opps...",text:d.mensaje,icon:"error",customClass:{popup:"sweet-container-error"}})}(t)})}({...n})},r.appendChild(a),r.appendChild(s),t.appendChild(r)}),document.querySelector(".contenido").appendChild(t)}}();